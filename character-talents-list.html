<script>
  function onChangeRank() {
    const valuesToSet = {};
    recalculateTalentLabel(record, valuesToSet);
    updateAttributes(record, valuesToSet);
    if (Object.keys(valuesToSet).length > 0) {
      api.setValues(valuesToSet);
    }
  }
</script>

<accordion field="talentDetailsAccordion" size="xs">
  <accordion.control>
    <div style="height: 30px; display: flex; gap: 4px; align-items: center">
      <div style="width: 30px; min-width: 30px">
        <portrait width="30px" height="30px" name="portrait"></portrait>
      </div>
      <div style="width: 50px">
        <numberfield
          size="xs"
          textalign="center"
          variant="tooltip"
          label="Rank"
          field="rank"
          onchange="onChangeRank();"
          placeholder="1"
        ></numberfield>
      </div>
      <div style="flex-grow: 1">
        <namefield
          size="xs"
          variant="standard"
          placeholder="Talent Name..."
          field="namefield"
        ></namefield>
      </div>
      <div style="width: 100px">
        <stringfield
          field="activation"
          size="xs"
          label="Activation"
          variant="tooltip-underline"
          placeholder="Activation..."
        ></stringfield>
      </div>
    </div>
  </accordion.control>
  <richtextfield
    width="100%"
    field="description"
    label="Description"
    placeholder="Enter Description..."
    disablecontrols="true"
  ></richtextfield>
</accordion>
