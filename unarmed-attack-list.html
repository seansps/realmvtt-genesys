<script>
  function onRollAttack() {
    const dataPathToWeapon = getNearestParentDataPath(dataPath);
    const weapon = api.getValue(dataPathToWeapon);
    rollAttack(record, weapon, dataPathToWeapon);
  }
</script>

<div style="display: flex; flex-direction: column">
  <!-- Main row for icon, name, buttons -->
  <div
    style="display: flex; flex-direction: row; gap: 4px; align-items: center"
  >
    <div style="width: 30px; height: 30px; min-width: 30px; min-height: 30px">
      <portrait width="30px" height="30px" field="portrait"></portrait>
    </div>
    <div style="width: 100%">
      <namefield
        field="namefield"
        variant="standard"
        placeholder="Unarmed Attack..."
      ></namefield>
    </div>
    <div style="width: 70px; min-width: 70px">
      <stringfield
        width="100%"
        textalign="center"
        field="range"
        label="Range"
        size="xs"
        placeholder="Range..."
        variant="tooltip-underline"
      ></stringfield>
    </div>
    <!-- Roll Attack -->
    <div>
      <!-- Roll Damage -->
      <button
        size="xs"
        radius="xs"
        field="attackBtn"
        label="Roll Attack"
        color="primary"
        variant="light"
        onclick="onRollAttack();"
      ></button>
    </div>
  </div>
</div>
