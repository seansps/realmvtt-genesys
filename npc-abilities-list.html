<script>
  function onUseAbility() {
    const talent = api.getValue(getNearestParentDataPath(dataPath));
    useAbility(record, talent);
  }
</script>

<div style="height: 30px; display: flex; gap: 4px; align-items: center">
  <box field="abilityPortrait" hidden="true">
    <div style="width: 30px; min-width: 30px">
      <portrait width="30px" height="30px" name="portrait"></portrait>
    </div>
  </box>
  <iconbutton
    field="customAbility"
    size="md"
    label="Use Custom Ability"
    variant="default"
    options='[{"label": "Use Custom Ability", "value": "use", "icon": "IconWand"}]'
    onclick="onUseAbility();"
  ></iconbutton>
  <div style="flex-grow: 1">
    <namefield
      size="xs"
      variant="standard"
      placeholder="Ability Name..."
      field="namefield"
    ></namefield>
  </div>
  <button
    field="useButton"
    size="xs"
    label="Use"
    color="primary"
    variant="light"
    onclick="onUseAbility();"
  ></button>
</div>
<accordion
  field="abilityDetailsAccordion"
  label="Description"
  size="xs"
  variant="light"
>
  <richtextfield
    width="100%"
    field="description"
    label="Description"
    placeholder="Enter Description..."
    disablecontrols="true"
  ></richtextfield>
</accordion>
<accordion
  field="abilityModifiersAccordion"
  label="Modifiers and Settings"
  size="xs"
  hideonlocked="true"
  variant="light"
>
  <checkbox field="isForcePower" label="Is Force Power"></checkbox>
  <div style="display: flex; flex-direction: row; gap: 4px; margin-bottom: 4px">
    <dropdown
      width="100%"
      field="skill"
      searchable="true"
      label="Skill"
      placeholder="Select Skill to Roll if Applicable..."
      options='[{"label": "None", "value": "None"}, {"label": "Astrogation", "value": "Astrogation"}, {"label": "Athletics", "value": "Athletics"}, {"label": "Brawl", "value": "Brawl"}, {"label": "Charm", "value": "Charm"}, {"label": "Coercion", "value": "Coercion"}, {"label": "Computers", "value": "Computers"}, {"label": "Cool", "value": "Cool"}, {"label": "Coordination", "value": "Coordination"}, {"label": "Core Worlds", "value": "Core Worlds"}, {"label": "Deception", "value": "Deception"}, {"label": "Discipline", "value": "Discipline"}, {"label": "Education", "value": "Education"}, {"label": "Gunnery", "value": "Gunnery"}, {"label": "Leadership", "value": "Leadership"}, {"label": "Lightsaber", "value": "Lightsaber"}, {"label": "Lore", "value": "Lore"}, {"label": "Mechanics", "value": "Mechanics"}, {"label": "Medicine", "value": "Medicine"}, {"label": "Melee", "value": "Melee"}, {"label": "Negotiation", "value": "Negotiation"}, {"label": "Outer Rim", "value": "Outer Rim"}, {"label": "Perception", "value": "Perception"}, {"label": "Piloting (Planetary)", "value": "Piloting (Planetary)"}, {"label": "Piloting (Space)", "value": "Piloting (Space)"}, {"label": "Ranged (Heavy)", "value": "Ranged (Heavy)"}, {"label": "Ranged (Light)", "value": "Ranged (Light)"}, {"label": "Resilience", "value": "Resilience"}, {"label": "Skulduggery", "value": "Skulduggery"}, {"label": "Stealth", "value": "Stealth"}, {"label": "Streetwise", "value": "Streetwise"}, {"label": "Survival", "value": "Survival"}, {"label": "Underworld", "value": "Underworld"}, {"label": "Vigilance", "value": "Vigilance"}, {"label": "Xenology", "value": "Xenology"}]'
    ></dropdown>
  </div>
  <list listtype="modifier_list" field="modifiers"></list>
</accordion>
